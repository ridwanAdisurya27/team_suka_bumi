   <section className="flex flex-col md:flex-row gap-8 px-6 sm:px-12 mx-auto mt-10 pb-24">
        <section className="donation md:w-[70%]">
          <div className="w-full grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
            {donationCards.map((card, index) => (
              <DonationCard key={index} {...card} />
            ))}
          </div>
        </section>
        {/* Sidebar kiri */}
        <aside className="md:w-[25%] lg:w-[25%] bg-white rounded-xl shadow p-6 h-fit">
          {/* Progress Circle */}
          <div className="flex flex-col items-center mb-6">
            <div className="relative w-20 h-20">
              {/* Lingkaran progress (78%) */}
              <div className="absolute inset-0 rounded-full border-[6px] border-gray-200"></div>
              <div
                className="absolute inset-0 rounded-full border-[6px] border-leaf-500 border-t-transparent rotate-[280deg]"
                style={{
                  clipPath: "inset(0 0 0 0)",
                  transform: "rotate(140deg)",
                }}
              ></div>
              <i className="bx bx-donate-heart absolute text-3xl text-leaf-500 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></i>
            </div>
            <p className="text-sm text-gray-600 mt-2">Progress 78%</p>
          </div>

          {/* Filter Donasi */}
          <div className="space-y-5">
            <div>
              <h3 className="font-semibold text-gray-800 mb-2">
                Urutkan Berdasarkan
              </h3>
              <div className="flex flex-col space-y-2 text-sm text-gray-700">
                <label>
                  <input
                    type="radio"
                    name="sort"
                    className="mr-2 accent-leaf-500"
                  />
                  Terbaru
                </label>
                <label>
                  <input
                    type="radio"
                    name="sort"
                    className="mr-2 accent-leaf-500"
                  />
                  Terdekat
                </label>
              </div>
            </div>

            <div>
              <h3 className="font-semibold text-gray-800 mb-2">Jenis Donasi</h3>
              <div className="flex flex-col space-y-2 text-sm text-gray-700">
                <label>
                  <input
                    type="radio"
                    name="jenis"
                    className="mr-2 accent-leaf-500"
                  />
                  Pendidikan
                </label>
                <label>
                  <input
                    type="radio"
                    name="jenis"
                    className="mr-2 accent-leaf-500"
                  />
                  Kemanusiaan
                </label>
                <label>
                  <input
                    type="radio"
                    name="jenis"
                    className="mr-2 accent-leaf-500"
                  />
                  Bencana Alam
                </label>
              </div>
            </div>
          </div>
        </aside>

        {/* Bagian kanan - grid card */}
      </section>

// upgrade api route with file
import { NextRequest, NextResponse } from "next/server";

export const runtime = "nodejs";

export async function POST(req: NextRequest) {
  try {
    const formData = await req.formData();

    const textFields: Record<string, string> = {};
    const fileFields: Record<string, File> = {};

    console.log("=== RAW FORM DATA ===");

    for (const [key, value] of formData.entries()) {
      console.log("FIELD:", key, "VALUE:", value);

      if (typeof value === "string") {
        textFields[key] = value;
      } else if (value instanceof Blob) {
        fileFields[key] = value as File;
        console.log(`➡ FILE FIELD DETECTED: ${key}, size=${value.size}`);
      }
    }

    console.log("TEXT FIELDS:", textFields);
    console.log("FILE FIELDS:", Object.keys(fileFields));

    // Upload semua file sequential
    const uploadedFiles: Record<string, string> = {};

    for (const [fieldName, file] of Object.entries(fileFields)) {
      try {
        const fd = new FormData();
        fd.append("file", file); // HARUS pakai key "file"

        console.log(`Uploading file: ${fieldName}`);

        const res = await fetch(`${getBaseUrl()}/api/upload`, {
          method: "POST",
          body: fd,
        });

        if (!res.ok) {
          console.error(`UPLOAD FAILED (${fieldName})`, await res.text());
          uploadedFiles[fieldName] = "";
          continue;
        }

        const json = await res.json();

        if (json?.success && json?.result?.file) {
          uploadedFiles[fieldName] = json.result.file;
        } else {
          uploadedFiles[fieldName] = "";
        }

        console.log(`✔ UPLOADED: ${fieldName} => ${uploadedFiles[fieldName]}`);
      } catch (uploadErr) {
        console.error(`UPLOAD ERROR (${fieldName})`, uploadErr);
        uploadedFiles[fieldName] = "";
      }
    }

    const mergedResult = {
      ...textFields,
      ...uploadedFiles,
    };

    console.log("=== FINAL MERGED RESULT ===", mergedResult);

    return NextResponse.json({
      success: true,
      message: "Upgrade data processed successfully",
      receivedData: mergedResult,
      uploadedFiles,
      totalUploaded: Object.keys(uploadedFiles).length,
      timestamp: new Date().toISOString(),
    });
  } catch (err: any) {
    console.error("UPGRADE API ERROR:", err);
    return NextResponse.json(
      { success: false, error: err.message },
      { status: 500 }
    );
  }
}

function getBaseUrl() {
  if (process.env.NODE_ENV === "development") {
    return process.env.NEXT_PUBLIC_BASE_URL || "http://localhost:4000";
  }
  return (
    process.env.NEXT_PUBLIC_BASE_URL || "https://your-production-domain.com"
  );
}

